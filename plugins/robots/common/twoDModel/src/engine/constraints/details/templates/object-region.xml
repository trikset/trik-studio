<templates>
    <template name="condition-event">
        <params>
            <param name="id"/>
            <param name="settedUpInit" default="true"/>
	    <param name="trigger"/>
	        <trigger>
	            <success/>
	        </trigger>
	    <param name="conditions">
	    	<condition>
	    	    <true/>
	    	</condition>
	    </param>
        </params>
        <content>
<![CDATA[
<event settedUpInitially="#{settedUpInit}" id="#{id}">
    #{conditions}
    <triggers>
        #{trigger}
    </triggers>
</event>
]]>
        </content>
    </template>
    
    <template name="change-score-with-log">
        <params>
            <param name="id"/>
            <param name="settedUpInit" default="true"/>
	    <param name="trigger"/>
	    <param name="conditions"/>
	    <param name="operation" default="sum"/>
	    <param name="scoreVariable"/>
	    <param name="variable"/>
        </params>
        <content>
<![CDATA[
<use template="condition-event">
    <with id="#{id}"/>
    <with settedUpInit="#{settedUpInit}"/>
    <with param="trigger">
        <setter name="#{scoreVariable}">
            <#{operation}>
                <variableValue name="#{scoreVariable}"/>
                <variableValue name="#{variable}"/>
            </#{operation}>
        </setter>
        <message text="Points scored: %text1%">
            <replace var="text1">
                <variableValue name="#{scoreVariable}"/>
            </replace>
        </message>
        #{trigger}
    </with>
    <with param="conditions">
        #{conditions}
    </with>
</use>
]]>
        </content>
    </template>
    
    <template name="object-left-region-with-score">
        <params>
            <param name="id"/>
            <param name="settedUpInit" default="true"/>
	    <param name="objectId" default="robot1"/>
            <param name="regionId"/>
            <param name="objectPoint" default="any"/>
	    <param name="trigger"/>
	    <param name="operation" default="sum"/>
	    <param name="scoreVariable"/> <!--default="total_score" -->
	    <param name="variable"/>
        </params>
        <content>
<![CDATA[
<use template="change-score-with-log">
    <with id="#{id}"/>
    <with settedUpInit="#{settedUpInit}"/>
    <with operation="#{operation}"/>
    <with scoreVariable="#{scoreVariable}"/>
    <with variable="#{variable}"/>
    <with param="trigger">
        #{trigger}
    </with>
    <with param="conditions">
        <condition>
            <not>
                <inside objectId="#{objectId}" regionId="#{regionId}" objectPoint="#{objectPoint}"/>
            </not>
        </condition>
    </with>
</use>
]]>
        </content>
    </template>
    
    <template name="object-in-region-with-score">
        <params>
            <param name="id"/>
            <param name="settedUpInit" default="true"/>
	    <param name="objectId" default="robot1"/>
            <param name="regionId"/>
            <param name="objectPoint" default="all"/>
	    <param name="trigger"/>
	    <param name="operation" default="sum"/>
	    <param name="scoreVariable"/> <!--default="total_score" -->
	    <param name="variable"/>
        </params>
        <content>
<![CDATA[
<use template="change-score-with-log">
    <with id="#{id}"/>
    <with settedUpInit="#{settedUpInit}"/>
    <with operation="#{operation}"/>
    <with scoreVariable="#{scoreVariable}"/>
    <with variable="#{variable}"/>
    <with param="trigger">
        #{trigger}
    </with>
    <with param="conditions">
        <condition>
            <inside objectId="#{objectId}" regionId="#{regionId}" objectPoint="#{objectPoint}"/>
        </condition>
    </with>
</use>
]]>
        </content>
    </template>
</templates>
